# .env_bot.template-test – Template for TradeBot Configuration v1.0.0+
# All strategy logic, broker routing, and runtime behavior are driven by this file.
# Time values are specified in UTC. Comments indicate usage and system impact.

# -----------------------------------------
# General & Debugging
# -----------------------------------------
VERSION_TAG=v1.0.0                     # Version tag (must match VERSION.md)
BUILD_MODE=release                     # debug or release – sets internal behavior and logging verbosity
DISABLE_ALL_TRADES=false               # Master kill switch to block all trading activity
TEST_MODE=true                         # Enables paper trading APIs and shortens analysis/monitoring windows
FORCE_PAPER_EXPORT=false               # Forces all logs/ledgers to paper mode, regardless of TEST_MODE
DEBUG_LOG_LEVEL=verbose                # Logging level: quiet, info, or verbose
ENABLE_LOGGING=true                    # Enable writing log files to /logs and /backups
LOG_FORMAT=json                        # json (structured) or csv (flat) log output format

# -----------------------------------------
# Trade Execution & Risk Controls
# -----------------------------------------
TRADE_CONFIRMATION_REQUIRED=false      # If true, bot will wait for manual confirmation before sending trades
API_RETRY_LIMIT=3                      # Number of times to retry failed broker API calls
API_TIMEOUT=30                         # Timeout in seconds before aborting broker API call
FRACTIONAL=true                        # Allow fractional shares (broker must support)
TOTAL_ALLOCATION=0.02                  # Total capital allocated per strategy session (e.g., 2% of account)
MAX_TRADES=4                           # Max number of trades allowed per strategy window
WEIGHTS=0.4,0.2,0.2,0.2                # Trade weight percentages based on number of triggered trades
DAILY_LOSS_LIMIT=0.05                  # Absolute loss limit (e.g., 5% of capital); triggers shutdown
MAX_RISK_PER_TRADE=0.025               # Maximum allocation per trade based on account value (2.5%)
MAX_OPEN_POSITIONS=5                   # Cap on total simultaneous positions across all strategies

# -----------------------------------------
# Price & Volume Filters
# -----------------------------------------
MIN_PRICE=2                            # Minimum price allowed per trade
MAX_PRICE=100                          # Maximum price allowed per trade
MIN_VOLUME_THRESHOLD=1000000           # Minimum volume filter (ignored when TEST_MODE=true)

# -----------------------------------------
# Strategy Routing & Broker Mode
# -----------------------------------------
ALPACA_ENABLED=true                    # Enable Alpaca broker integration
IBKR_ENABLED=true                      # Enable IBKR (Interactive Brokers) integration
ALPACA_MODE=paper                      # paper or live – applies only to Alpaca
IBKR_MODE=paper                        # paper or live – applies only to IBKR
STRATEGY_SEQUENCE=open,mid,close       # Strategy run order; values: open, mid, close
STRATEGY_OVERRIDE=null                 # Optional: override normal order and run only one strategy

# -----------------------------------------
# Global Time & Polling
# -----------------------------------------
TRADING_DAYS=mon,tue,wed,thu,fri       # Days allowed for trading (UTC-based control logic)
SLEEP_TIME=1s                          # Interval between polling cycles for runtime monitoring

# -----------------------------------------
# OPEN Strategy Configuration
# -----------------------------------------
STRAT_OPEN_ENABLED=true                # Enable or disable OPEN strategy
START_TIME_OPEN=14:30                  # UTC start time (market open = 9:30 AM EST)
OPEN_ANALYSIS_TIME=20                  # Minutes to track high/low range before breakout
OPEN_MONITORING_TIME=30                # Minutes to monitor active positions
STRAT_OPEN_BUFFER=0.02                 # Breakout threshold above high/low range (e.g., 2%)
SHORT_TYPE_OPEN=disabled               # Shorting method: disabled, ShortSell, LongPut, InverseETF

# -----------------------------------------
# MID Strategy Configuration (VWAP Reversion)
# -----------------------------------------
STRAT_MID_ENABLED=true                 # Enable or disable MID strategy
START_TIME_MID=15:30                   # UTC start time (10:30 AM EST)
MID_ANALYSIS_TIME=10                   # Minutes before trade signal is evaluated
MID_MONITORING_TIME=45                 # Maximum hold time after entry
STRAT_MID_VWAP_THRESHOLD=0.02          # VWAP deviation required to enter trade
SHORT_TYPE_MID=InverseETF              # Shorting method: ShortSell, LongPut, InverseETF, or disabled

# -----------------------------------------
# CLOSE Strategy Configuration (EOD Momentum/Fade)
# -----------------------------------------
STRAT_CLOSE_ENABLED=true               # Enable or disable CLOSE strategy
START_TIME_CLOSE=19:30                 # UTC start time (2:30 PM EST)
CLOSE_ANALYSIS_TIME=10                 # Minutes to detect signal
CLOSE_MONITORING_TIME=30               # Duration to manage position after entry
STRAT_CLOSE_VIX_THRESHOLD=15           # Min VIX level required to allow entry
SHORT_TYPE_CLOSE=LongPut               # Shorting method: ShortSell, LongPut, InverseETF, or disabled

# -----------------------------------------
# Notifications
# -----------------------------------------
NOTIFY_ON_FILL=true                    # Send email alert on trade entry
NOTIFY_ON_EXIT=true                    # Send email alert on trade exit

# -----------------------------------------
# Reporting & GnuCash Export
# -----------------------------------------
GNC_EXPORT_MODE=auto                   # auto = export after each trade, off = no export
