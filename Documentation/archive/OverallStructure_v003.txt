


Overall Directory Structure Diagram



TradeBot-001/
â”œâ”€â”€ .env                                  # Global FastAPI/web env (not trading vars)
â”œâ”€â”€ .scpignore                            # Exclude local secrets from upload
â”œâ”€â”€ encrypt_password.py                   # Encrypt web/API login credentials
â”œâ”€â”€ generate_key.py                       # Generates encryption keys for .env files
â”œâ”€â”€ requirements.txt                      # Full dependency list: FastAPI, brokers, logging, security

â”œâ”€â”€ tbot_api/                             # Optional API layer (FastAPI interface to control bot remotely)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ env_api.py                        # Loads general .env for web use
â”‚   â”œâ”€â”€ logs_api.py                       # API error/activity logging
â”‚   â”œâ”€â”€ main_api.py                       # Launches FastAPI endpoints (start/stop/status/settings)
â”‚   â”œâ”€â”€ auth.py                           # Handles web login + password decryption (AES/Bcrypt)

â”œâ”€â”€ tbot_bot/                             # âœ… Core trading engine (runs standalone, no dependencies)
â”‚   â”œâ”€â”€ .env_bot                          # â›³ Primary config file: strategy toggles, broker keys, safety controls
â”‚   â”œâ”€â”€ env_bot.py                        # Loads/validates .env_bot vars, applies runtime context
â”‚   â”œâ”€â”€ main_bot.py                       # Main loop: coordinates strategy routing, lifecycle, logging, exits
â”‚   â”œâ”€â”€ start_bot.py / stop_bot.py        # Trigger execution or halt (can be used by CLI or web/API)
â”‚   â”œâ”€â”€ service_bot.py                    # Optional background daemon (used with cron/supervisor if needed)
â”‚   â”œâ”€â”€ status_bot.py                     # Returns current state: IDLE, ANALYZING, TRADING, EXITING
â”‚   â”œâ”€â”€ settings_bot.py                   # Edits `.env_bot` safely from external sources (CLI, web)
â”‚   â”œâ”€â”€ logs_bot.py                       # Logs all trades, errors, state transitions, daily performance
â”‚   â”œâ”€â”€ notifier_bot.py                   # Sends alerts: fill notices, crash alerts, exits, drawdowns

â”‚   â”œâ”€â”€ kill_switch.py                    # ğŸš¨ Kills all open positions + halts execution on drawdown breach
â”‚   â”œâ”€â”€ watchdog_bot.py                   # â±ï¸ Pings APIs; triggers fallback or shutdown on disconnect/errors
â”‚   â”œâ”€â”€ security_bot.py                   # ğŸ” Encrypts/decrypts sensitive .env values at rest (future: integrate Vault)

â”‚   â”œâ”€â”€ broker_api.py                     # ğŸ§  Broker router: loads correct API handler based on .env_bot
â”‚   â”œâ”€â”€ broker_robinhood.py              # Robinhood trading logic (sandbox-friendly, unofficial)
â”‚   â”œâ”€â”€ broker_webull.py                 # Webull logic (low-cost testbed, unofficial API)
â”‚   â”œâ”€â”€ broker_tastytrade.py             # Tastytrade support (real fills, U.S. only)
â”‚   â”œâ”€â”€ broker_ibkr.py                   # âœ… Global-grade API (IBKR), fully supported
â”‚   â”œâ”€â”€ orders_bot.py                     # Core trade engine: submits, cancels, trails, and manages orders
â”‚   â”œâ”€â”€ reporting_bot.py                  # Logs finalized trades to correct GnuCash file (see below)
â”‚   â”œâ”€â”€ risk_bot.py                       # Calculates size, max loss, risk %, trailing stop logic
â”‚   â”œâ”€â”€ utils_bot.py                      # Shared helpers (time conversions, rounding, log formatting)

â”‚   â”œâ”€â”€ finnhub_screener.py               # Scans tickers using price/volume/volatility from Finnhub
â”‚   â”œâ”€â”€ strategy_router.py                # Routes to active strategy by time or STRATEGY_NAME override
â”‚   â”œâ”€â”€ strategy_open.py                  # â° Opening range breakout logic (9:30â€“10:20am)
â”‚   â”œâ”€â”€ strategy_mid.py                   # ğŸ” VWAP mean reversion logic (10:30â€“2:30pm)
â”‚   â”œâ”€â”€ strategy_close.py                 # ğŸ”š EOD trend/fade logic (2:30â€“4:00pm)
â”‚   â”œâ”€â”€ strategy_meta.py                  # Global strategy thresholds + metadata (entry filters, R:R targets)

â”‚   â”œâ”€â”€ gnu_paper.gnucash                 # ğŸ§¾ Paper-mode GnuCash-compatible ledger file (test trades only)
â”‚   â”œâ”€â”€ gnu_live.gnucash                  # ğŸ§¾ Live-mode trade ledger (IBKR/Alpaca/Tasty executed trades)
â”‚   â”œâ”€â”€ gnu_exporter.py                   # Converts internal trade logs to dual GnuCash format (XML/SQL)
â”‚   â”œâ”€â”€ trade_history.csv                 # All trades (tagged by strategy, live vs paper, UUID-linked)
â”‚   â”œâ”€â”€ unresolved_orders.log             # Logs any failed or partially-filled orders for audit

â”œâ”€â”€ tbot_web/                             # ğŸŒ Lightweight frontend dashboard (can be stripped off)
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ fnt/                          # Fonts
â”‚   â”‚   â””â”€â”€ css/
â”‚   â”‚       â”œâ”€â”€ main.css                  # Layout and core UI styling
â”‚   â”‚       â””â”€â”€ theme.css                 # Optional dark/light UI themes
â”‚   â”œâ”€â”€ favicon.ico / .gif                # Browser icons
â”‚   â”œâ”€â”€ index.html                        # Login (auth tied to API)
â”‚   â”œâ”€â”€ main.html                         # Iframe-based dashboard
â”‚   â”œâ”€â”€ logs.html                         # Frontend view of logs
â”‚   â”œâ”€â”€ settings.html                     # UI for updating strategy variables via API
â”‚   â”œâ”€â”€ status.html                       # Live view: active strategy, run status, logs preview
â”‚   â”œâ”€â”€ robots.txt                        # Blocks bots from crawling
â”‚   â”œâ”€â”€ py/                               # Python backend scripts to support UI
â”‚   â”‚   â”œâ”€â”€ login_web.py                  # Auth route handling (uses auth.py logic)
â”‚   â”‚   â”œâ”€â”€ main_web.py                   # Routes UI logic to correct API handler
â”‚   â”‚   â”œâ”€â”€ logs_web.py                   # Fetches logs for display in logs.html
â”‚   â”‚   â”œâ”€â”€ start_stop_web.py             # Interfaces with start_bot/stop_bot
â”‚   â”‚   â”œâ”€â”€ status_web.py                 # Connects to status_bot and returns live status
